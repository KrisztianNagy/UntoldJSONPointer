!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lib",[],e):"object"==typeof exports?exports.lib=e():r.lib=e()}("undefined"!=typeof self?self:this,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)t.d(n,o,function(e){return r[e]}.bind(null,o));return n},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=1)}([function(r,e,t){"use strict";function n(r,e,t,o){this.message=r,this.expected=e,this.found=t,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(r,e){function t(){this.constructor=r}t.prototype=e.prototype,r.prototype=new t}(n,Error),n.buildMessage=function(r,e){var t={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var e,t="";for(e=0;e<r.parts.length;e++)t+=r.parts[e]instanceof Array?i(r.parts[e][0])+"-"+i(r.parts[e][1]):i(r.parts[e]);return"["+(r.inverted?"^":"")+t+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function i(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var e,n,o,i=new Array(r.length);for(e=0;e<r.length;e++)i[e]=(o=r[e],t[o.type](o));if(i.sort(),i.length>0){for(e=1,n=1;e<i.length;e++)i[e-1]!==i[e]&&(i[n]=i[e],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(e)+" found."},r.exports={SyntaxError:n,parse:function(r,e){e=void 0!==e?e:{};var t,o={},i={Entry:de},a=de,u=function(r){return e.queryBuilder.buildPathCombination(r)},l=function(r,t){return e.queryBuilder.buildPath(r,t)},s=function(r,t){return e.queryBuilder.buildIdentifier(t,"|"===r)},p="{",c=se("{",!1),f="}",h=se("}",!1),y=function(r){return r},g=".",d=se(".",!1),m="|",P=se("|",!1),A=function(r,t){return e.queryBuilder.buildFilterContent(r,t)},b=function(r,t){return e.queryBuilder.buildCombinedFilter(r,t)},v="(",C=se("(",!1),T=")",x=se(")",!1),N=function(r){return e.queryBuilder.buildParenthesis(r)},O=function(r,t){return e.queryBuilder.buildOperatorPlusFilterScope(r,t)},S=function(r,t){return e.queryBuilder.buildOperatorPlusComparer(r,t)},E=ce("&&"),F="&&",j=se("&&",!1),w=ce("||"),q="||",V=se("||",!1),k=function(r,t,n){return e.queryBuilder.buildComparison(r,t,n)},L=function(r){return e.queryBuilder.buildValue(r)},B=function(r,e){return r+(e?e.join(""):"")},Q="[",I=se("[",!1),H="]",M=se("]",!1),_=function(r){return e.queryBuilder.buildIdentifier(r,!1)},z=/^[a-zA-Z]/,R=pe([["a","z"],["A","Z"]],!1,!1),Z=/^[a-zA-Z0-9]/,J=pe([["a","z"],["A","Z"],["0","9"]],!1,!1),U=ce("whitespace"),D=/^[ \t\n\r]/,G=pe([" ","\t","\n","\r"],!1,!1),K=ce("string"),W='"',X=se('"',!1),Y=function(r){return r.join("")},$="'",rr=se("'",!1),er="\\",tr=se("\\",!1),nr={type:"any"},or=function(r){return r},ir=function(r){return r},ar="b",ur=se("b",!1),lr=function(){return"\b"},sr="f",pr=se("f",!1),cr=function(){return"\f"},fr="n",hr=se("n",!1),yr=function(){return"\n"},gr="r",dr=se("r",!1),mr=function(){return"\r"},Pr="t",Ar=se("t",!1),br=function(){return"\t"},vr="v",Cr=se("v",!1),Tr=function(){return"\v"},xr="<=",Nr=se("<=",!1),Or="<",Sr=se("<",!1),Er=">=",Fr=se(">=",!1),jr=">",wr=se(">",!1),qr=":",Vr=se(":",!1),kr="!==",Lr=se("!==",!1),Br="!=",Qr=se("!=",!1),Ir="===",Hr=se("===",!1),Mr="==",_r=se("==",!1),zr=function(){return!0},Rr=function(){return!1},Zr=function(){return null},Jr=/^[0-9]/,Ur=pe([["0","9"]],!1,!1),Dr=function(r,e){return r&&r.length?parseFloat(r.join("")+e.join(""),10):parseInt(e.join(""),10)},Gr=function(r){return parseInt(r.join(""),10)},Kr=ce("true"),Wr="true",Xr=se("true",!1),Yr=ce("false"),$r="false",re=se("false",!1),ee=ce("null"),te="null",ne=se("null",!1),oe=0,ie=[{line:1,column:1}],ae=0,ue=[],le=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=i[e.startRule]}function se(r,e){return{type:"literal",text:r,ignoreCase:e}}function pe(r,e,t){return{type:"class",parts:r,inverted:e,ignoreCase:t}}function ce(r){return{type:"other",description:r}}function fe(e){var t,n=ie[e];if(n)return n;for(t=e-1;!ie[t];)t--;for(n={line:(n=ie[t]).line,column:n.column};t<e;)10===r.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return ie[e]=n,n}function he(r,e){var t=fe(r),n=fe(e);return{start:{offset:r,line:t.line,column:t.column},end:{offset:e,line:n.line,column:n.column}}}function ye(r){oe<ae||(oe>ae&&(ae=oe,ue=[]),ue.push(r))}function ge(r,e,t){return new n(n.buildMessage(r,e),r,e,t)}function de(){var r,e;for(oe,r=[],e=me();e!==o;)r.push(e),e=me();return r!==o&&(r=u(r)),r}function me(){var r,e,t,n;if(r=oe,e=[],(t=Pe())!==o)for(;t!==o;)e.push(t),t=Pe();else e=o;if(e!==o&&(t=Se())!==o?((n=Ae())===o&&(n=null),n!==o?r=e=l(e,n):(oe=r,r=o)):(oe=r,r=o),r===o){for(r=oe,e=[],t=Pe();t!==o;)e.push(t),t=Pe();e!==o&&(t=Se())!==o&&(n=Ae())!==o?r=e=l(e,n):(oe=r,r=o)}return r}function Pe(){var e;return(e=function(){var e,t,n;return e=oe,(t=function(){var e;return 46===r.charCodeAt(oe)?(e=g,oe++):(e=o,0===le&&ye(d)),e===o&&(124===r.charCodeAt(oe)?(e=m,oe++):(e=o,0===le&&ye(P))),e}())!==o&&(n=function(){var e,t,n,i;if(e=oe,(t=function(){var e;return z.test(r.charAt(oe))?(e=r.charAt(oe),oe++):(e=o,0===le&&ye(R)),e}())!==o){for(n=[],i=Oe();i!==o;)n.push(i),i=Oe();n!==o?(t=B(t,n),e=t):(oe=e,e=o)}else oe=e,e=o;return e}())!==o?(t=s(t,n),e=t):(oe=e,e=o),e}())===o&&(e=function(){var e,t,n,i;return e=oe,91===r.charCodeAt(oe)?(t=Q,oe++):(t=o,0===le&&ye(I)),t!==o&&Se()!==o&&(n=function(){var e;return(e=Ee())===o&&(e=function(){var e,t;if(oe,e=[],Jr.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ye(Ur)),t!==o)for(;t!==o;)e.push(t),Jr.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ye(Ur));else e=o;return e!==o&&(e=Gr(e)),e}()),e}())!==o&&Se()!==o?(93===r.charCodeAt(oe)?(i=H,oe++):(i=o,0===le&&ye(M)),i!==o?(t=_(n),e=t):(oe=e,e=o)):(oe=e,e=o),e}()),e}function Ae(){var e,t,n,i;return e=oe,123===r.charCodeAt(oe)?(t=p,oe++):(t=o,0===le&&ye(c)),t!==o&&Se()!==o&&(n=function(){var r,e,t,n;if(r=oe,(e=be())!==o){for(t=[],n=Ce();n!==o;)t.push(n),n=Ce();t!==o&&(n=Se())!==o?(e=A(e,t),r=e):(oe=r,r=o)}else oe=r,r=o;return r}())!==o&&Se()!==o?(125===r.charCodeAt(oe)?(i=f,oe++):(i=o,0===le&&ye(h)),i!==o?e=t=y(n):(oe=e,e=o)):(oe=e,e=o),e}function be(){var e;return(e=function(){var e,t,n,i;return e=oe,Se()!==o?(40===r.charCodeAt(oe)?(t=v,oe++):(t=o,0===le&&ye(C)),t!==o&&(n=be())!==o?(41===r.charCodeAt(oe)?(i=T,oe++):(i=o,0===le&&ye(x)),i!==o&&Se()!==o?e=N(n):(oe=e,e=o)):(oe=e,e=o)):(oe=e,e=o),e}())===o&&(e=function(){var r,e,t,n;if(r=oe,(e=xe())!==o){for(t=[],n=ve();n!==o;)t.push(n),n=ve();t!==o&&(n=Se())!==o?r=e=b(e,t):(oe=r,r=o)}else oe=r,r=o;return r}()),e}function ve(){var r;return(r=function(){var r,e,t,n;return r=oe,(e=Se())!==o&&(t=Te())!==o&&Se()!==o&&(n=xe())!==o?(e=S(t,n),r=e):(oe=r,r=o),r}())===o&&(r=Ce()),r}function Ce(){var r,e,t;return r=oe,Se()!==o&&(e=Te())!==o&&Se()!==o&&(t=be())!==o?r=O(e,t):(oe=r,r=o),r}function Te(){var e;return(e=function(){var e;return le++,r.substr(oe,2)===F?(e=F,oe+=2):(e=o,0===le&&ye(j)),le--,e===o&&0===le&&ye(E),e}())===o&&(e=function(){var e;return le++,r.substr(oe,2)===q?(e=q,oe+=2):(e=o,0===le&&ye(V)),le--,e===o&&0===le&&ye(w),e}()),e}function xe(){var e,t,n,i;return e=oe,(t=Ne())!==o&&Se()!==o&&(n=function(){var e;return r.substr(oe,2)===xr?(e=xr,oe+=2):(e=o,0===le&&ye(Nr)),e===o&&(60===r.charCodeAt(oe)?(e=Or,oe++):(e=o,0===le&&ye(Sr)),e===o&&(r.substr(oe,2)===Er?(e=Er,oe+=2):(e=o,0===le&&ye(Fr)),e===o&&(62===r.charCodeAt(oe)?(e=jr,oe++):(e=o,0===le&&ye(wr)),e===o&&(58===r.charCodeAt(oe)?(e=qr,oe++):(e=o,0===le&&ye(Vr)),e===o&&(r.substr(oe,3)===kr?(e=kr,oe+=3):(e=o,0===le&&ye(Lr)),e===o&&(r.substr(oe,2)===Br?(e=Br,oe+=2):(e=o,0===le&&ye(Qr)),e===o&&(r.substr(oe,3)===Ir?(e=Ir,oe+=3):(e=o,0===le&&ye(Hr)),e===o&&(r.substr(oe,2)===Mr?(e=Mr,oe+=2):(e=o,0===le&&ye(_r)))))))))),e}())!==o&&Se()!==o&&(i=Ne())!==o?e=t=k(t,n,i):(oe=e,e=o),e}function Ne(){var e,t;return e=oe,(t=function(){var e,t;return(e=function(){var e,t,n,i;if(e=oe,t=oe,Jr.test(r.charAt(oe))?(n=r.charAt(oe),oe++):(n=o,0===le&&ye(Ur)),n!==o?(46===r.charCodeAt(oe)?(i=g,oe++):(i=o,0===le&&ye(d)),i!==o?t=n=[n,i]:(oe=t,t=o)):(oe=t,t=o),t===o&&(t=null),t!==o){if(n=[],Jr.test(r.charAt(oe))?(i=r.charAt(oe),oe++):(i=o,0===le&&ye(Ur)),i!==o)for(;i!==o;)n.push(i),Jr.test(r.charAt(oe))?(i=r.charAt(oe),oe++):(i=o,0===le&&ye(Ur));else n=o;n!==o?(t=Dr(t,n),e=t):(oe=e,e=o)}else oe=e,e=o;return e}())===o&&(e=Ee())===o&&(e=oe,(t=function(){var e;return le++,r.substr(oe,4)===Wr?(e=Wr,oe+=4):(e=o,0===le&&ye(Xr)),le--,e===o&&0===le&&ye(Kr),e}())!==o&&(t=zr()),(e=t)===o&&(e=oe,(t=function(){var e;return le++,r.substr(oe,5)===$r?(e=$r,oe+=5):(e=o,0===le&&ye(re)),le--,e===o&&0===le&&ye(Yr),e}())!==o&&(t=Rr()),(e=t)===o&&(e=oe,(t=function(){var e;return le++,r.substr(oe,4)===te?(e=te,oe+=4):(e=o,0===le&&ye(ne)),le--,e===o&&0===le&&ye(ee),e}())!==o&&(t=Zr()),e=t))),e}())!==o&&(t=L(t)),(e=t)===o&&(e=me()),e}function Oe(){var e;return Z.test(r.charAt(oe))?(e=r.charAt(oe),oe++):(e=o,0===le&&ye(J)),e}function Se(){var e,t;for(le++,e=[],D.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ye(G));t!==o;)e.push(t),D.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ye(G));return le--,e===o&&(t=o,0===le&&ye(U)),e}function Ee(){var e,t,n,i;if(le++,e=oe,34===r.charCodeAt(oe)?(t=W,oe++):(t=o,0===le&&ye(X)),t!==o){for(n=[],i=Fe();i!==o;)n.push(i),i=Fe();n!==o?(34===r.charCodeAt(oe)?(i=W,oe++):(i=o,0===le&&ye(X)),i!==o?e=t=Y(n):(oe=e,e=o)):(oe=e,e=o)}else oe=e,e=o;if(e===o)if(e=oe,39===r.charCodeAt(oe)?(t=$,oe++):(t=o,0===le&&ye(rr)),t!==o){for(n=[],i=je();i!==o;)n.push(i),i=je();n!==o?(39===r.charCodeAt(oe)?(i=$,oe++):(i=o,0===le&&ye(rr)),i!==o?e=t=Y(n):(oe=e,e=o)):(oe=e,e=o)}else oe=e,e=o;return le--,e===o&&(t=o,0===le&&ye(K)),e}function Fe(){var e,t,n;return e=oe,t=oe,le++,34===r.charCodeAt(oe)?(n=W,oe++):(n=o,0===le&&ye(X)),n===o&&(92===r.charCodeAt(oe)?(n=er,oe++):(n=o,0===le&&ye(tr))),le--,n===o?t=void 0:(oe=t,t=o),t!==o?(r.length>oe?(n=r.charAt(oe),oe++):(n=o,0===le&&ye(nr)),n!==o?e=t=or(n):(oe=e,e=o)):(oe=e,e=o),e===o&&(e=oe,92===r.charCodeAt(oe)?(t=er,oe++):(t=o,0===le&&ye(tr)),t!==o&&(n=we())!==o?e=t=ir(n):(oe=e,e=o)),e}function je(){var e,t,n;return e=oe,t=oe,le++,39===r.charCodeAt(oe)?(n=$,oe++):(n=o,0===le&&ye(rr)),n===o&&(92===r.charCodeAt(oe)?(n=er,oe++):(n=o,0===le&&ye(tr))),le--,n===o?t=void 0:(oe=t,t=o),t!==o?(r.length>oe?(n=r.charAt(oe),oe++):(n=o,0===le&&ye(nr)),n!==o?e=t=or(n):(oe=e,e=o)):(oe=e,e=o),e===o&&(e=oe,92===r.charCodeAt(oe)?(t=er,oe++):(t=o,0===le&&ye(tr)),t!==o&&(n=we())!==o?e=t=ir(n):(oe=e,e=o)),e}function we(){var e,t;return 39===r.charCodeAt(oe)?(e=$,oe++):(e=o,0===le&&ye(rr)),e===o&&(34===r.charCodeAt(oe)?(e=W,oe++):(e=o,0===le&&ye(X)),e===o&&(92===r.charCodeAt(oe)?(e=er,oe++):(e=o,0===le&&ye(tr)),e===o&&(e=oe,98===r.charCodeAt(oe)?(t=ar,oe++):(t=o,0===le&&ye(ur)),t!==o&&(t=lr()),(e=t)===o&&(e=oe,102===r.charCodeAt(oe)?(t=sr,oe++):(t=o,0===le&&ye(pr)),t!==o&&(t=cr()),(e=t)===o&&(e=oe,110===r.charCodeAt(oe)?(t=fr,oe++):(t=o,0===le&&ye(hr)),t!==o&&(t=yr()),(e=t)===o&&(e=oe,114===r.charCodeAt(oe)?(t=gr,oe++):(t=o,0===le&&ye(dr)),t!==o&&(t=mr()),(e=t)===o&&(e=oe,116===r.charCodeAt(oe)?(t=Pr,oe++):(t=o,0===le&&ye(Ar)),t!==o&&(t=br()),(e=t)===o&&(e=oe,118===r.charCodeAt(oe)?(t=vr,oe++):(t=o,0===le&&ye(Cr)),t!==o&&(t=Tr()),e=t)))))))),e}if((t=a())!==o&&oe===r.length)return t;throw t!==o&&oe<r.length&&ye({type:"end"}),ge(ue,ae<r.length?r.charAt(ae):null,ae<r.length?he(ae,ae+1):he(ae,ae))}}},function(r,e,t){"use strict";t.r(e);var n=t(0);let o;!function(r){r[r.Identifier=0]="Identifier",r[r.Value=1]="Value",r[r.Comparison=2]="Comparison",r[r.Comparer=3]="Comparer",r[r.LogicalOperatorPlusComparison=4]="LogicalOperatorPlusComparison",r[r.LogicalOperatorHierarchy=5]="LogicalOperatorHierarchy",r[r.LogicalOperatorPlusFilterScope=6]="LogicalOperatorPlusFilterScope"}(o||(o={}));class i{buildPath(r,e){let t=null,n=null;if(r.forEach(r=>{t?(n.next=r,n=n.next):n=t=r}),e){if(!n)return e;n.next=e}return t}buildPathCombination(r){let e=null,t=null;return r.forEach(r=>{for(e?t.next=r:t=e=r;t.next;)t=t.next}),e}buildIdentifier(r,e){return{operationPayload:{memberName:r,isFlat:e},operationType:o.Identifier}}buildValue(r){return{operationPayload:r,operationType:o.Value}}buildComparison(r,e,t){return{operationPayload:{left:r,comparer:{operationType:o.Comparer,operationPayload:e},right:t},operationType:o.Comparison}}buildOperatorPlusComparer(r,e){return{operationPayload:{operator:r,comparison:e},operationType:o.LogicalOperatorPlusComparison}}buildOperatorPlusFilterScope(r,e){return{operationPayload:{operator:r,scope:e},operationType:o.LogicalOperatorPlusFilterScope}}buildCombinedFilter(r,e){const t={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:"",comparisons:[r]}};return this.mergeFilters(t,e)}buildParenthesis(r){return{operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:"",comparisons:[r]}}}buildFilterContent(r,e){return e.length?this.mergeFilters(r,e):r}mergeFilters(r,e){const t=[];let n=r,i=n;return t.push(n),e.forEach(r=>{n||(i=n,t.push(n));const e=r.operationPayload.scope?r.operationPayload.scope.operationPayload.comparisons:[r.operationPayload.comparison];if(""===i.operationPayload.operator||r.operationPayload.operator===i.operationPayload.operator)i.operationPayload.operator=r.operationPayload.operator,i.operationPayload.comparisons=[...i.operationPayload.comparisons,...e];else{if("&&"===r.operationPayload.operator){const n=i.operationPayload.comparisons.pop(),a={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:r.operationPayload.operator,comparisons:[n,...e]}};i.operationPayload.comparisons.push(a),t.push(a)}else{const a=t.pop(),u={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:r.operationPayload.operator,comparisons:[a,...e]}};i=u,t.length||(n=i),t.push(u)}}}),n}}class a{getNextPointer(r){let e=this.getNextValue(r);const t={eachElement:!1};return e.values?t.multipleTargets=e.values.map(r=>({targetPosition:r,propertyName:""})):t.singleTarget={propertyName:"",targetPosition:e.value},t}getNextValue(r){let e={};if(r.multipleTargets)r.eachElement?(e={values:[]},r.multipleTargets.forEach(r=>{Array.isArray(r.targetPosition)?r.targetPosition.forEach(t=>{e.values=[...e.values,...this.getProperty(t,r.propertyName)]}):e.values=[...e.values,null]})):e={values:r.multipleTargets.map(r=>this.getProperty(r.targetPosition,r.propertyName))};else if(r.singleTarget)if(r.eachElement){const t=Array.isArray(r.singleTarget.targetPosition);e=t?{values:r.singleTarget.targetPosition.map(e=>{const t=this.getProperty(e,r.singleTarget.propertyName);return void 0===t?null:t})}:{values:[]}}else{const t=this.getProperty(r.singleTarget.targetPosition,r.singleTarget.propertyName);e={value:void 0===t?null:t}}else e={};return e}getProperty(r,e){return Array.isArray(e)?e.map(e=>r?r[e]:null):r?r[e]:null}}class u extends a{getAll(){if(!this.propertyPointer||!this.propertyPointer.singleTarget&&!this.propertyPointer.multipleTargets)return[];const r=this.getNextValue(this.propertyPointer);return void 0===r?[]:this.propertyPointer.eachElement||this.propertyPointer.multipleTargets?r.values:[r.value]}getSingle(){const r=this.getAll();return r.length?r[0]:null}setAll(r){this.set(r,!1)}setSingle(r){this.set(r,!0)}set(r,e){if(this.propertyPointer&&(this.propertyPointer.singleTarget||this.propertyPointer.multipleTargets))if(this.propertyPointer.multipleTargets)for(let t=0;t<this.propertyPointer.multipleTargets.length;t++){const n=this.propertyPointer.multipleTargets[t];if(Array.isArray(n.propertyName))for(let t=0;t<n.propertyName.length;t++){const o=n.propertyName[t];if(n.targetPosition[o]=r,e)return}else n.targetPosition[n.propertyName]=r;if(e)return}else if(this.propertyPointer.eachElement&&this.propertyPointer.singleTarget){if(Array.isArray(this.propertyPointer.singleTarget.targetPosition))for(let t=0;t<this.propertyPointer.singleTarget.targetPosition.length;t++){if(this.propertyPointer.singleTarget.targetPosition[t][this.propertyPointer.singleTarget.propertyName]=r,e)return}}else if(this.propertyPointer.singleTarget)if(Array.isArray(this.propertyPointer.singleTarget.propertyName))for(let t=0;t<this.propertyPointer.singleTarget.propertyName.length;t++){const n=this.propertyPointer.singleTarget.propertyName[t];if(this.propertyPointer.singleTarget.targetPosition[n]=r,e)return}else null!==this.propertyPointer.singleTarget.targetPosition&&(this.propertyPointer.singleTarget.targetPosition[this.propertyPointer.singleTarget.propertyName]=r)}constructor(r,e,t){super(),this.isQueryValid=r,this.propertyPointer=e,this.error=t}}class l extends a{constructor(){super()}process(r,e){return this.resolveQuery(r,null,e)}resolveQuery(r,e,t){let n=e?this.getNextPointer(e):{singleTarget:{propertyName:"",targetPosition:t},eachElement:!1};switch(r.operationType){case o.Identifier:n.eachElement=r.operationPayload.isFlat,n.multipleTargets?n.multipleTargets.forEach(e=>{e.propertyName=r.operationPayload.memberName}):n.singleTarget.propertyName=r.operationPayload.memberName;break;case o.Comparison:n=this.filterAll(e,r);break;case o.LogicalOperatorHierarchy:n=this.filterAll(e,r);break;default:throw"Not implemented operation type on "+JSON.stringify(r)}return r.next?this.resolveQuery(r.next,n):n}filterAll(r,e){const t=new u(!0,r),n={eachElement:!1};if(r.multipleTargets){const r=t.getAll();n.multipleTargets=r.map(r=>({targetPosition:r,propertyName:this.filterSingle(r,e)}))}else if(r.singleTarget){const r=t.getSingle();n.singleTarget={targetPosition:r,propertyName:this.filterSingle(r,e)}}return n}filterSingle(r,e){const t=[];return r&&Array.isArray(r)&&r.forEach((r,n)=>{if("object"==typeof r){(e.operationType===o.Comparison?this.compare(r,e):this.combine(r,e))&&t.push(n)}}),t}combine(r,e){const t="&&"===e.operationPayload.operator;for(let n=0;n<e.operationPayload.comparisons.length;n++){const i=e.operationPayload.comparisons[n],a=i.operationType===o.Comparison?this.compare(r,i):this.combine(r,i);if(a&&!t)return!0;if(!a&&t)return!1}return t}compare(r,e){const{left:t,comparer:n,right:o}=e.operationPayload,i=this.getComparisonSideValue(t,r),a=this.getComparisonSideValue(o,r);let u=!1;switch(n.operationPayload){case">=":u=i>=a;break;case">":u=i>a;break;case"<=":u=i<=a;break;case"<":u=i<a;break;case"==":u=i==a;break;case"===":u=i===a;break;case"!=":u=i!=a;break;case"!==":u=i!==a;break;case":":u="string"==typeof i&&"string"==typeof a&&i.indexOf(a)>-1}return u}getComparisonSideValue(r,e){if(r.operationType===o.Identifier){const t=this.resolveQuery(r,null,e);return new u(!0,t).getSingle()}return r.operationPayload}}t.d(e,"JSONPointer",function(){return s});class s{createQuery(r){try{return{isQueryValid:!0,query:n.parse(r,{queryBuilder:new i})}}catch(r){return{error:r,isQueryValid:!1,query:null}}}executeQuery(r,e){let t="string"==typeof e?this.createQuery(e):e;if(t.isQueryValid&&t.query){const e=(new l).process(t.query,r);return new u(!0,e)}return new u(!1,null,t.error)}}}])});