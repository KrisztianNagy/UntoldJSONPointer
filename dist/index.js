!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("JSONPointer",[],r):"object"==typeof exports?exports.JSONPointer=r():e.JSONPointer=r()}("undefined"!=typeof self?self:this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r,t){"use strict";function n(e,r,t,o){this.message=e,this.expected=r,this.found=t,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(e,r){function t(){this.constructor=e}t.prototype=r.prototype,e.prototype=new t}(n,Error),n.buildMessage=function(e,r){var t={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var r,t="";for(r=0;r<e.parts.length;r++)t+=e.parts[r]instanceof Array?i(e.parts[r][0])+"-"+i(e.parts[r][1]):i(e.parts[r]);return"["+(e.inverted?"^":"")+t+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}return"Expected "+function(e){var r,n,o,i=new Array(e.length);for(r=0;r<e.length;r++)i[r]=(o=e[r],t[o.type](o));if(i.sort(),i.length>0){for(r=1,n=1;r<i.length;r++)i[r-1]!==i[r]&&(i[n]=i[r],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(r)+" found."},e.exports={SyntaxError:n,parse:function(e,r){r=void 0!==r?r:{};var t,o={},i={Entry:dr},a=dr,u=function(e){return r.queryBuilder.buildPathCombination(e)},s=function(e,t){return r.queryBuilder.buildPath(e,t)},l=function(e,t){return r.queryBuilder.buildIdentifier(t,"|"===e)},p="{",c=lr("{",!1),f="}",g=lr("}",!1),h=function(e){return e},y=".",d=lr(".",!1),m="|",P=lr("|",!1),A=function(e,t){return r.queryBuilder.buildFilterContent(e,t)},v=function(e,t){return r.queryBuilder.buildCombinedFilter(e,t)},b="(",T=lr("(",!1),C=")",x=lr(")",!1),N=function(e){return r.queryBuilder.buildParenthesis(e)},O=function(e,t){return r.queryBuilder.buildOperatorPlusFilterScope(e,t)},S=function(e,t){return r.queryBuilder.buildOperatorPlusComparer(e,t)},E=cr("&&"),F="&&",j=lr("&&",!1),w=cr("||"),q="||",V=lr("||",!1),k=function(e,t,n){return r.queryBuilder.buildComparison(e,t,n)},L=function(e){return r.queryBuilder.buildValue(e)},B=function(e,r){return e+(r?r.join(""):"")},Q="[",I=lr("[",!1),H="]",M=lr("]",!1),R=function(e){return r.queryBuilder.buildIdentifier(e,!1)},_=/^[a-zA-Z]/,z=pr([["a","z"],["A","Z"]],!1,!1),J=/^[a-zA-Z0-9]/,Z=pr([["a","z"],["A","Z"],["0","9"]],!1,!1),U=cr("whitespace"),D=/^[ \t\n\r]/,G=pr([" ","\t","\n","\r"],!1,!1),K=cr("string"),W='"',X=lr('"',!1),Y=function(e){return e.join("")},$="'",ee=lr("'",!1),re="\\",te=lr("\\",!1),ne={type:"any"},oe=function(e){return e},ie=function(e){return e},ae="b",ue=lr("b",!1),se=function(){return"\b"},le="f",pe=lr("f",!1),ce=function(){return"\f"},fe="n",ge=lr("n",!1),he=function(){return"\n"},ye="r",de=lr("r",!1),me=function(){return"\r"},Pe="t",Ae=lr("t",!1),ve=function(){return"\t"},be="v",Te=lr("v",!1),Ce=function(){return"\v"},xe="<=",Ne=lr("<=",!1),Oe="<",Se=lr("<",!1),Ee=">=",Fe=lr(">=",!1),je=">",we=lr(">",!1),qe=":",Ve=lr(":",!1),ke="!==",Le=lr("!==",!1),Be="!=",Qe=lr("!=",!1),Ie="===",He=lr("===",!1),Me="==",Re=lr("==",!1),_e=function(){return!0},ze=function(){return!1},Je=function(){return null},Ze=/^[0-9]/,Ue=pr([["0","9"]],!1,!1),De=function(e,r){return e&&e.length?parseFloat(e.join("")+r.join(""),10):parseInt(r.join(""),10)},Ge=function(e){return parseInt(e.join(""),10)},Ke=cr("true"),We="true",Xe=lr("true",!1),Ye=cr("false"),$e="false",er=lr("false",!1),rr=cr("null"),tr="null",nr=lr("null",!1),or=0,ir=[{line:1,column:1}],ar=0,ur=[],sr=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=i[r.startRule]}function lr(e,r){return{type:"literal",text:e,ignoreCase:r}}function pr(e,r,t){return{type:"class",parts:e,inverted:r,ignoreCase:t}}function cr(e){return{type:"other",description:e}}function fr(r){var t,n=ir[r];if(n)return n;for(t=r-1;!ir[t];)t--;for(n={line:(n=ir[t]).line,column:n.column};t<r;)10===e.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return ir[r]=n,n}function gr(e,r){var t=fr(e),n=fr(r);return{start:{offset:e,line:t.line,column:t.column},end:{offset:r,line:n.line,column:n.column}}}function hr(e){or<ar||(or>ar&&(ar=or,ur=[]),ur.push(e))}function yr(e,r,t){return new n(n.buildMessage(e,r),e,r,t)}function dr(){var e,r;for(or,e=[],r=mr();r!==o;)e.push(r),r=mr();return e!==o&&(e=u(e)),e}function mr(){var e,r,t,n;if(e=or,r=[],(t=Pr())!==o)for(;t!==o;)r.push(t),t=Pr();else r=o;if(r!==o&&(t=Sr())!==o?((n=Ar())===o&&(n=null),n!==o?e=r=s(r,n):(or=e,e=o)):(or=e,e=o),e===o){for(e=or,r=[],t=Pr();t!==o;)r.push(t),t=Pr();r!==o&&(t=Sr())!==o&&(n=Ar())!==o?e=r=s(r,n):(or=e,e=o)}return e}function Pr(){var r;return(r=function(){var r,t,n;return r=or,(t=function(){var r;return 46===e.charCodeAt(or)?(r=y,or++):(r=o,0===sr&&hr(d)),r===o&&(124===e.charCodeAt(or)?(r=m,or++):(r=o,0===sr&&hr(P))),r}())!==o&&(n=function(){var r,t,n,i;if(r=or,(t=function(){var r;return _.test(e.charAt(or))?(r=e.charAt(or),or++):(r=o,0===sr&&hr(z)),r}())!==o){for(n=[],i=Or();i!==o;)n.push(i),i=Or();n!==o?(t=B(t,n),r=t):(or=r,r=o)}else or=r,r=o;return r}())!==o?(t=l(t,n),r=t):(or=r,r=o),r}())===o&&(r=function(){var r,t,n,i;return r=or,91===e.charCodeAt(or)?(t=Q,or++):(t=o,0===sr&&hr(I)),t!==o&&Sr()!==o&&(n=function(){var r;return(r=Er())===o&&(r=function(){var r,t;if(or,r=[],Ze.test(e.charAt(or))?(t=e.charAt(or),or++):(t=o,0===sr&&hr(Ue)),t!==o)for(;t!==o;)r.push(t),Ze.test(e.charAt(or))?(t=e.charAt(or),or++):(t=o,0===sr&&hr(Ue));else r=o;return r!==o&&(r=Ge(r)),r}()),r}())!==o&&Sr()!==o?(93===e.charCodeAt(or)?(i=H,or++):(i=o,0===sr&&hr(M)),i!==o?(t=R(n),r=t):(or=r,r=o)):(or=r,r=o),r}()),r}function Ar(){var r,t,n,i;return r=or,123===e.charCodeAt(or)?(t=p,or++):(t=o,0===sr&&hr(c)),t!==o&&Sr()!==o&&(n=function(){var e,r,t,n;if(e=or,(r=vr())!==o){for(t=[],n=Tr();n!==o;)t.push(n),n=Tr();t!==o&&(n=Sr())!==o?(r=A(r,t),e=r):(or=e,e=o)}else or=e,e=o;return e}())!==o&&Sr()!==o?(125===e.charCodeAt(or)?(i=f,or++):(i=o,0===sr&&hr(g)),i!==o?r=t=h(n):(or=r,r=o)):(or=r,r=o),r}function vr(){var r;return(r=function(){var r,t,n,i;return r=or,Sr()!==o?(40===e.charCodeAt(or)?(t=b,or++):(t=o,0===sr&&hr(T)),t!==o&&(n=vr())!==o?(41===e.charCodeAt(or)?(i=C,or++):(i=o,0===sr&&hr(x)),i!==o&&Sr()!==o?r=N(n):(or=r,r=o)):(or=r,r=o)):(or=r,r=o),r}())===o&&(r=function(){var e,r,t,n;if(e=or,(r=xr())!==o){for(t=[],n=br();n!==o;)t.push(n),n=br();t!==o&&(n=Sr())!==o?e=r=v(r,t):(or=e,e=o)}else or=e,e=o;return e}()),r}function br(){var e;return(e=function(){var e,r,t,n;return e=or,(r=Sr())!==o&&(t=Cr())!==o&&Sr()!==o&&(n=xr())!==o?(r=S(t,n),e=r):(or=e,e=o),e}())===o&&(e=Tr()),e}function Tr(){var e,r,t;return e=or,Sr()!==o&&(r=Cr())!==o&&Sr()!==o&&(t=vr())!==o?e=O(r,t):(or=e,e=o),e}function Cr(){var r;return(r=function(){var r;return sr++,e.substr(or,2)===F?(r=F,or+=2):(r=o,0===sr&&hr(j)),sr--,r===o&&0===sr&&hr(E),r}())===o&&(r=function(){var r;return sr++,e.substr(or,2)===q?(r=q,or+=2):(r=o,0===sr&&hr(V)),sr--,r===o&&0===sr&&hr(w),r}()),r}function xr(){var r,t,n,i;return r=or,(t=Nr())!==o&&Sr()!==o&&(n=function(){var r;return e.substr(or,2)===xe?(r=xe,or+=2):(r=o,0===sr&&hr(Ne)),r===o&&(60===e.charCodeAt(or)?(r=Oe,or++):(r=o,0===sr&&hr(Se)),r===o&&(e.substr(or,2)===Ee?(r=Ee,or+=2):(r=o,0===sr&&hr(Fe)),r===o&&(62===e.charCodeAt(or)?(r=je,or++):(r=o,0===sr&&hr(we)),r===o&&(58===e.charCodeAt(or)?(r=qe,or++):(r=o,0===sr&&hr(Ve)),r===o&&(e.substr(or,3)===ke?(r=ke,or+=3):(r=o,0===sr&&hr(Le)),r===o&&(e.substr(or,2)===Be?(r=Be,or+=2):(r=o,0===sr&&hr(Qe)),r===o&&(e.substr(or,3)===Ie?(r=Ie,or+=3):(r=o,0===sr&&hr(He)),r===o&&(e.substr(or,2)===Me?(r=Me,or+=2):(r=o,0===sr&&hr(Re)))))))))),r}())!==o&&Sr()!==o&&(i=Nr())!==o?r=t=k(t,n,i):(or=r,r=o),r}function Nr(){var r,t;return r=or,(t=function(){var r,t;return(r=function(){var r,t,n,i;if(r=or,t=or,Ze.test(e.charAt(or))?(n=e.charAt(or),or++):(n=o,0===sr&&hr(Ue)),n!==o?(46===e.charCodeAt(or)?(i=y,or++):(i=o,0===sr&&hr(d)),i!==o?t=n=[n,i]:(or=t,t=o)):(or=t,t=o),t===o&&(t=null),t!==o){if(n=[],Ze.test(e.charAt(or))?(i=e.charAt(or),or++):(i=o,0===sr&&hr(Ue)),i!==o)for(;i!==o;)n.push(i),Ze.test(e.charAt(or))?(i=e.charAt(or),or++):(i=o,0===sr&&hr(Ue));else n=o;n!==o?(t=De(t,n),r=t):(or=r,r=o)}else or=r,r=o;return r}())===o&&(r=Er())===o&&(r=or,(t=function(){var r;return sr++,e.substr(or,4)===We?(r=We,or+=4):(r=o,0===sr&&hr(Xe)),sr--,r===o&&0===sr&&hr(Ke),r}())!==o&&(t=_e()),(r=t)===o&&(r=or,(t=function(){var r;return sr++,e.substr(or,5)===$e?(r=$e,or+=5):(r=o,0===sr&&hr(er)),sr--,r===o&&0===sr&&hr(Ye),r}())!==o&&(t=ze()),(r=t)===o&&(r=or,(t=function(){var r;return sr++,e.substr(or,4)===tr?(r=tr,or+=4):(r=o,0===sr&&hr(nr)),sr--,r===o&&0===sr&&hr(rr),r}())!==o&&(t=Je()),r=t))),r}())!==o&&(t=L(t)),(r=t)===o&&(r=mr()),r}function Or(){var r;return J.test(e.charAt(or))?(r=e.charAt(or),or++):(r=o,0===sr&&hr(Z)),r}function Sr(){var r,t;for(sr++,r=[],D.test(e.charAt(or))?(t=e.charAt(or),or++):(t=o,0===sr&&hr(G));t!==o;)r.push(t),D.test(e.charAt(or))?(t=e.charAt(or),or++):(t=o,0===sr&&hr(G));return sr--,r===o&&(t=o,0===sr&&hr(U)),r}function Er(){var r,t,n,i;if(sr++,r=or,34===e.charCodeAt(or)?(t=W,or++):(t=o,0===sr&&hr(X)),t!==o){for(n=[],i=Fr();i!==o;)n.push(i),i=Fr();n!==o?(34===e.charCodeAt(or)?(i=W,or++):(i=o,0===sr&&hr(X)),i!==o?r=t=Y(n):(or=r,r=o)):(or=r,r=o)}else or=r,r=o;if(r===o)if(r=or,39===e.charCodeAt(or)?(t=$,or++):(t=o,0===sr&&hr(ee)),t!==o){for(n=[],i=jr();i!==o;)n.push(i),i=jr();n!==o?(39===e.charCodeAt(or)?(i=$,or++):(i=o,0===sr&&hr(ee)),i!==o?r=t=Y(n):(or=r,r=o)):(or=r,r=o)}else or=r,r=o;return sr--,r===o&&(t=o,0===sr&&hr(K)),r}function Fr(){var r,t,n;return r=or,t=or,sr++,34===e.charCodeAt(or)?(n=W,or++):(n=o,0===sr&&hr(X)),n===o&&(92===e.charCodeAt(or)?(n=re,or++):(n=o,0===sr&&hr(te))),sr--,n===o?t=void 0:(or=t,t=o),t!==o?(e.length>or?(n=e.charAt(or),or++):(n=o,0===sr&&hr(ne)),n!==o?r=t=oe(n):(or=r,r=o)):(or=r,r=o),r===o&&(r=or,92===e.charCodeAt(or)?(t=re,or++):(t=o,0===sr&&hr(te)),t!==o&&(n=wr())!==o?r=t=ie(n):(or=r,r=o)),r}function jr(){var r,t,n;return r=or,t=or,sr++,39===e.charCodeAt(or)?(n=$,or++):(n=o,0===sr&&hr(ee)),n===o&&(92===e.charCodeAt(or)?(n=re,or++):(n=o,0===sr&&hr(te))),sr--,n===o?t=void 0:(or=t,t=o),t!==o?(e.length>or?(n=e.charAt(or),or++):(n=o,0===sr&&hr(ne)),n!==o?r=t=oe(n):(or=r,r=o)):(or=r,r=o),r===o&&(r=or,92===e.charCodeAt(or)?(t=re,or++):(t=o,0===sr&&hr(te)),t!==o&&(n=wr())!==o?r=t=ie(n):(or=r,r=o)),r}function wr(){var r,t;return 39===e.charCodeAt(or)?(r=$,or++):(r=o,0===sr&&hr(ee)),r===o&&(34===e.charCodeAt(or)?(r=W,or++):(r=o,0===sr&&hr(X)),r===o&&(92===e.charCodeAt(or)?(r=re,or++):(r=o,0===sr&&hr(te)),r===o&&(r=or,98===e.charCodeAt(or)?(t=ae,or++):(t=o,0===sr&&hr(ue)),t!==o&&(t=se()),(r=t)===o&&(r=or,102===e.charCodeAt(or)?(t=le,or++):(t=o,0===sr&&hr(pe)),t!==o&&(t=ce()),(r=t)===o&&(r=or,110===e.charCodeAt(or)?(t=fe,or++):(t=o,0===sr&&hr(ge)),t!==o&&(t=he()),(r=t)===o&&(r=or,114===e.charCodeAt(or)?(t=ye,or++):(t=o,0===sr&&hr(de)),t!==o&&(t=me()),(r=t)===o&&(r=or,116===e.charCodeAt(or)?(t=Pe,or++):(t=o,0===sr&&hr(Ae)),t!==o&&(t=ve()),(r=t)===o&&(r=or,118===e.charCodeAt(or)?(t=be,or++):(t=o,0===sr&&hr(Te)),t!==o&&(t=Ce()),r=t)))))))),r}if((t=a())!==o&&or===e.length)return t;throw t!==o&&or<e.length&&hr({type:"end"}),yr(ur,ar<e.length?e.charAt(ar):null,ar<e.length?gr(ar,ar+1):gr(ar,ar))}}},function(e,r,t){"use strict";t.r(r);var n=t(0);let o;!function(e){e[e.Identifier=0]="Identifier",e[e.Value=1]="Value",e[e.Comparison=2]="Comparison",e[e.Comparer=3]="Comparer",e[e.LogicalOperatorPlusComparison=4]="LogicalOperatorPlusComparison",e[e.LogicalOperatorHierarchy=5]="LogicalOperatorHierarchy",e[e.LogicalOperatorPlusFilterScope=6]="LogicalOperatorPlusFilterScope"}(o||(o={}));class i{buildPath(e,r){let t=null,n=null;if(e.forEach(e=>{t?(n.next=e,n=n.next):n=t=e}),r){if(!n)return r;n.next=r}return t}buildPathCombination(e){let r=null,t=null;return e.forEach(e=>{for(r?t.next=e:t=r=e;t.next;)t=t.next}),r}buildIdentifier(e,r){return{operationPayload:{memberName:e,isFlat:r},operationType:o.Identifier}}buildValue(e){return{operationPayload:e,operationType:o.Value}}buildComparison(e,r,t){return{operationPayload:{left:e,comparer:{operationType:o.Comparer,operationPayload:r},right:t},operationType:o.Comparison}}buildOperatorPlusComparer(e,r){return{operationPayload:{operator:e,comparison:r},operationType:o.LogicalOperatorPlusComparison}}buildOperatorPlusFilterScope(e,r){return{operationPayload:{operator:e,scope:r},operationType:o.LogicalOperatorPlusFilterScope}}buildCombinedFilter(e,r){const t={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:"",comparisons:[e]}};return this.mergeFilters(t,r)}buildParenthesis(e){return{operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:"",comparisons:[e]}}}buildFilterContent(e,r){return r.length?this.mergeFilters(e,r):e}mergeFilters(e,r){const t=[];let n=e,i=n;return t.push(n),r.forEach(e=>{n||(i=n,t.push(n));const r=e.operationPayload.scope?e.operationPayload.scope.operationPayload.comparisons:[e.operationPayload.comparison];if(""===i.operationPayload.operator||e.operationPayload.operator===i.operationPayload.operator)i.operationPayload.operator=e.operationPayload.operator,i.operationPayload.comparisons=[...i.operationPayload.comparisons,...r];else{if("&&"===e.operationPayload.operator){const n=i.operationPayload.comparisons.pop(),a={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:e.operationPayload.operator,comparisons:[n,...r]}};i.operationPayload.comparisons.push(a),t.push(a)}else{const a=t.pop(),u={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:e.operationPayload.operator,comparisons:[a,...r]}};i=u,t.length||(n=i),t.push(u)}}}),n}}class a{constructor(){}getNextPointer(e){let r=this.getNextValue(e);const t={eachElement:!1,previous:e};return r.values?t.multipleTargets=r.values.map(e=>({targetPosition:e,propertyName:""})):t.singleTarget={propertyName:"",targetPosition:r.value},t}getNextValue(e){let r={};if(e.multipleTargets)e.eachElement?(r={values:[]},e.multipleTargets.forEach(e=>{Array.isArray(e.targetPosition)?e.targetPosition.forEach(t=>{r.values=[...r.values,...this.getProperty(t,e.propertyName)]}):r.values=[...r.values,null]})):r={values:e.multipleTargets.map(e=>this.getProperty(e.targetPosition,e.propertyName))};else if(e.singleTarget)if(e.eachElement){const t=Array.isArray(e.singleTarget.targetPosition);r=t?{values:e.singleTarget.targetPosition.map(r=>{const t=this.getProperty(r,e.singleTarget.propertyName);return void 0===t?null:t})}:{values:[]}}else{const t=this.getProperty(e.singleTarget.targetPosition,e.singleTarget.propertyName);r={value:void 0===t?null:t}}else r={};return r}getProperty(e,r){return Array.isArray(r)?r.map(r=>e?e[r]:null):e?e[r]:null}}class u extends a{resultCount(){return this.propertyPointer&&(this.propertyPointer.singleTarget||this.propertyPointer.multipleTargets)?this.propertyPointer.singleTarget?1:this.propertyPointer.multipleTargets?this.propertyPointer.multipleTargets.length:0:0}getAll(){if(!this.propertyPointer||!this.propertyPointer.singleTarget&&!this.propertyPointer.multipleTargets)return[];const e=this.getNextValue(this.propertyPointer);return void 0===e?[]:this.propertyPointer.eachElement||this.propertyPointer.multipleTargets?e.values:[e.value]}getSingle(){const e=this.getAll();return e.length?e[0]:null}getAt(e){const r=this.getAll();return r&&r.length>e?r[e]:null}parents(){return this.parentsAt(0)}parentsAt(e){if(!this.propertyPointer||!this.propertyPointer.singleTarget&&!this.propertyPointer.multipleTargets)return[];const r=this.getAt(e);return this.getParentReferenceArray(this.propertyPointer,r)}setAll(e){this.set(e)}setSingle(e){this.set(e,0)}setAt(e,r){this.set(e,r)}set(e,r){const t="number"==typeof r;if(this.propertyPointer&&(this.propertyPointer.singleTarget||this.propertyPointer.multipleTargets))if(this.propertyPointer.multipleTargets){let n=0;for(let o=0;o<this.propertyPointer.multipleTargets.length;o++){const i=this.propertyPointer.multipleTargets[o];if(Array.isArray(i.propertyName))for(let o=0;o<i.propertyName.length;o++){if(!t||r===n){const r=i.propertyName[o];if(i.targetPosition[r]=e,t)return}n++}else{if((!t||r===n)&&(i.targetPosition[i.propertyName]=e,t))return;n++}}}else if(this.propertyPointer.eachElement&&this.propertyPointer.singleTarget){if(Array.isArray(this.propertyPointer.singleTarget.targetPosition))for(let n=0;n<this.propertyPointer.singleTarget.targetPosition.length;n++)if(!t||r===n){if(this.propertyPointer.singleTarget.targetPosition[n][this.propertyPointer.singleTarget.propertyName]=e,t)return}}else if(this.propertyPointer.singleTarget)if(Array.isArray(this.propertyPointer.singleTarget.propertyName)){for(let n=0;n<this.propertyPointer.singleTarget.propertyName.length;n++)if(!t||r===n){const r=this.propertyPointer.singleTarget.propertyName[n];if(this.propertyPointer.singleTarget.targetPosition[r]=e,t)return}}else null!==this.propertyPointer.singleTarget.targetPosition&&(t&&0!==r||(this.propertyPointer.singleTarget.targetPosition[this.propertyPointer.singleTarget.propertyName]=e))}getParentReferenceArray(e,r){if(null===e)return[];let t=e,n=r;const o=[];for(;t;){if(t.singleTarget)if(t.eachElement)for(let e=0;e<t.singleTarget.targetPosition.length;e++){t.singleTarget.targetPosition[e][t.singleTarget.propertyName]===n&&(n=t.singleTarget.targetPosition[e])}else n=t.singleTarget.targetPosition;else if(t.multipleTargets)for(let e=0;e<t.multipleTargets.length;e++){const r=t.multipleTargets[e];if(t.eachElement&&r.propertyName)for(let e=0;e<r.propertyName.length;e++){const t=r.targetPosition[r.propertyName[e]];t===n&&(n=t)}else{const e=r.targetPosition[r.propertyName];e===n&&(n=e)}}o.push(n),t=t.previous}return o}constructor(e,r,t){super(),this.isQueryValid=e,this.propertyPointer=r,this.error=t}}class s extends a{constructor(){super()}process(e,r){return this.resolveQuery(e,null,r)}resolveQuery(e,r,t){let n=r?this.getNextPointer(r):{singleTarget:{propertyName:"",targetPosition:t},eachElement:!1};switch(e.operationType){case o.Identifier:n.eachElement=e.operationPayload.isFlat,n.multipleTargets?n.multipleTargets.forEach(r=>{r.propertyName=e.operationPayload.memberName}):n.singleTarget.propertyName=e.operationPayload.memberName;break;case o.Comparison:n=this.filterAll(r,e);break;case o.LogicalOperatorHierarchy:n=this.filterAll(r,e);break;default:throw"Not implemented operation type on "+JSON.stringify(e)}return e.next?this.resolveQuery(e.next,n):n}filterAll(e,r){const t=new u(!0,e),n={eachElement:!1,previous:e};if(e.multipleTargets){const e=t.getAll();n.multipleTargets=e.map(e=>({targetPosition:e,propertyName:this.filterSingle(e,r)}))}else if(e.singleTarget){const e=t.getSingle();n.singleTarget={targetPosition:e,propertyName:this.filterSingle(e,r)}}return n}filterSingle(e,r){const t=[];return e&&Array.isArray(e)&&e.forEach((e,n)=>{if("object"==typeof e){(r.operationType===o.Comparison?this.compare(e,r):this.combine(e,r))&&t.push(n)}}),t}combine(e,r){const t="&&"===r.operationPayload.operator;for(let n=0;n<r.operationPayload.comparisons.length;n++){const i=r.operationPayload.comparisons[n],a=i.operationType===o.Comparison?this.compare(e,i):this.combine(e,i);if(a&&!t)return!0;if(!a&&t)return!1}return t}compare(e,r){const{left:t,comparer:n,right:o}=r.operationPayload,i=this.getComparisonSideValue(t,e),a=this.getComparisonSideValue(o,e);let u=!1;switch(n.operationPayload){case">=":u=i>=a;break;case">":u=i>a;break;case"<=":u=i<=a;break;case"<":u=i<a;break;case"==":u=i==a;break;case"===":u=i===a;break;case"!=":u=i!=a;break;case"!==":u=i!==a;break;case":":u="string"==typeof i&&"string"==typeof a&&i.indexOf(a)>-1}return u}getComparisonSideValue(e,r){if(e.operationType===o.Identifier){const t=this.resolveQuery(e,null,r);return new u(!0,t).getSingle()}return e.operationPayload}}t.d(r,"default",function(){return l});class l{createQuery(e){try{return{isQueryValid:!0,query:n.parse(e,{queryBuilder:new i})}}catch(e){return{error:e,isQueryValid:!1,query:null}}}executeQuery(e,r){let t="string"==typeof r?this.createQuery(r):r;if(t.isQueryValid&&t.query){const r=(new s).process(t.query,e);return new u(!0,r)}return new u(!1,null,t.error)}}}]).default});