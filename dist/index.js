!function(r){var e={};function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)t.d(n,o,function(e){return r[e]}.bind(null,o));return n},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=1)}([function(r,e,t){"use strict";function n(r,e,t,o){this.message=r,this.expected=e,this.found=t,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(r,e){function t(){this.constructor=r}t.prototype=e.prototype,r.prototype=new t}(n,Error),n.buildMessage=function(r,e){var t={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var e,t="";for(e=0;e<r.parts.length;e++)t+=r.parts[e]instanceof Array?a(r.parts[e][0])+"-"+a(r.parts[e][1]):a(r.parts[e]);return"["+(r.inverted?"^":"")+t+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}function a(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+n(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+n(r)})}return"Expected "+function(r){var e,n,o,a=new Array(r.length);for(e=0;e<r.length;e++)a[e]=(o=r[e],t[o.type](o));if(a.sort(),a.length>0){for(e=1,n=1;e<a.length;e++)a[e-1]!==a[e]&&(a[n]=a[e],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(e)+" found."},r.exports={SyntaxError:n,parse:function(r,e){e=void 0!==e?e:{};var t,o={},a={Entry:de},i=de,u=function(r){return e.queryBuilder.buildPathCombination(r)},l=function(r,t){return e.queryBuilder.buildPath(r,t)},s=function(r,t){return e.queryBuilder.buildIdentifier(t,"|"===r)},p="{",c=se("{",!1),f="}",h=se("}",!1),g=function(r){return r},y=".",d=se(".",!1),m="|",P=se("|",!1),A=function(r,t){return e.queryBuilder.buildFilterContent(r,t)},v=function(r,t){return e.queryBuilder.buildCombinedFilter(r,t)},b="(",C=se("(",!1),T=")",x=se(")",!1),N=function(r){return e.queryBuilder.buildParenthesis(r)},O=function(r,t){return e.queryBuilder.buildOperatorPlusFilterScope(r,t)},S=function(r,t){return e.queryBuilder.buildOperatorPlusComparer(r,t)},E=ce("&&"),F="&&",w=se("&&",!1),q=ce("||"),j="||",V=se("||",!1),k=function(r,t,n){return e.queryBuilder.buildComparison(r,t,n)},L=function(r){return e.queryBuilder.buildValue(r)},B=function(r,e){return r+(e?e.join(""):"")},Q="[",I=se("[",!1),H="]",M=se("]",!1),_=function(r){return e.queryBuilder.buildIdentifier(r,!1)},z=/^[a-zA-Z]/,R=pe([["a","z"],["A","Z"]],!1,!1),Z=/^[a-zA-Z0-9]/,J=pe([["a","z"],["A","Z"],["0","9"]],!1,!1),U=ce("whitespace"),D=/^[ \t\n\r]/,G=pe([" ","\t","\n","\r"],!1,!1),K=ce("string"),W='"',X=se('"',!1),Y=function(r){return r.join("")},$="'",rr=se("'",!1),er="\\",tr=se("\\",!1),nr={type:"any"},or=function(r){return r},ar=function(r){return r},ir="b",ur=se("b",!1),lr=function(){return"\b"},sr="f",pr=se("f",!1),cr=function(){return"\f"},fr="n",hr=se("n",!1),gr=function(){return"\n"},yr="r",dr=se("r",!1),mr=function(){return"\r"},Pr="t",Ar=se("t",!1),vr=function(){return"\t"},br="v",Cr=se("v",!1),Tr=function(){return"\v"},xr="<=",Nr=se("<=",!1),Or="<",Sr=se("<",!1),Er=">=",Fr=se(">=",!1),wr=">",qr=se(">",!1),jr=":",Vr=se(":",!1),kr="!==",Lr=se("!==",!1),Br="!=",Qr=se("!=",!1),Ir="===",Hr=se("===",!1),Mr="==",_r=se("==",!1),zr=function(){return!0},Rr=function(){return!1},Zr=function(){return null},Jr=/^[0-9]/,Ur=pe([["0","9"]],!1,!1),Dr=function(r,e){return r&&r.length?parseFloat(r.join("")+e.join(""),10):parseInt(e.join(""),10)},Gr=function(r){return parseInt(r.join(""),10)},Kr=ce("true"),Wr="true",Xr=se("true",!1),Yr=ce("false"),$r="false",re=se("false",!1),ee=ce("null"),te="null",ne=se("null",!1),oe=0,ae=[{line:1,column:1}],ie=0,ue=[],le=0;if("startRule"in e){if(!(e.startRule in a))throw new Error("Can't start parsing from rule \""+e.startRule+'".');i=a[e.startRule]}function se(r,e){return{type:"literal",text:r,ignoreCase:e}}function pe(r,e,t){return{type:"class",parts:r,inverted:e,ignoreCase:t}}function ce(r){return{type:"other",description:r}}function fe(e){var t,n=ae[e];if(n)return n;for(t=e-1;!ae[t];)t--;for(n={line:(n=ae[t]).line,column:n.column};t<e;)10===r.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return ae[e]=n,n}function he(r,e){var t=fe(r),n=fe(e);return{start:{offset:r,line:t.line,column:t.column},end:{offset:e,line:n.line,column:n.column}}}function ge(r){oe<ie||(oe>ie&&(ie=oe,ue=[]),ue.push(r))}function ye(r,e,t){return new n(n.buildMessage(r,e),r,e,t)}function de(){var r,e;for(oe,r=[],e=me();e!==o;)r.push(e),e=me();return r!==o&&(r=u(r)),r}function me(){var r,e,t,n;if(r=oe,e=[],(t=Pe())!==o)for(;t!==o;)e.push(t),t=Pe();else e=o;if(e!==o&&(t=Se())!==o?((n=Ae())===o&&(n=null),n!==o?r=e=l(e,n):(oe=r,r=o)):(oe=r,r=o),r===o){for(r=oe,e=[],t=Pe();t!==o;)e.push(t),t=Pe();e!==o&&(t=Se())!==o&&(n=Ae())!==o?r=e=l(e,n):(oe=r,r=o)}return r}function Pe(){var e;return(e=function(){var e,t,n;return e=oe,(t=function(){var e;return 46===r.charCodeAt(oe)?(e=y,oe++):(e=o,0===le&&ge(d)),e===o&&(124===r.charCodeAt(oe)?(e=m,oe++):(e=o,0===le&&ge(P))),e}())!==o&&(n=function(){var e,t,n,a;if(e=oe,(t=function(){var e;return z.test(r.charAt(oe))?(e=r.charAt(oe),oe++):(e=o,0===le&&ge(R)),e}())!==o){for(n=[],a=Oe();a!==o;)n.push(a),a=Oe();n!==o?(t=B(t,n),e=t):(oe=e,e=o)}else oe=e,e=o;return e}())!==o?(t=s(t,n),e=t):(oe=e,e=o),e}())===o&&(e=function(){var e,t,n,a;return e=oe,91===r.charCodeAt(oe)?(t=Q,oe++):(t=o,0===le&&ge(I)),t!==o&&Se()!==o&&(n=function(){var e;return(e=Ee())===o&&(e=function(){var e,t;if(oe,e=[],Jr.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ge(Ur)),t!==o)for(;t!==o;)e.push(t),Jr.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ge(Ur));else e=o;return e!==o&&(e=Gr(e)),e}()),e}())!==o&&Se()!==o?(93===r.charCodeAt(oe)?(a=H,oe++):(a=o,0===le&&ge(M)),a!==o?(t=_(n),e=t):(oe=e,e=o)):(oe=e,e=o),e}()),e}function Ae(){var e,t,n,a;return e=oe,123===r.charCodeAt(oe)?(t=p,oe++):(t=o,0===le&&ge(c)),t!==o&&Se()!==o&&(n=function(){var r,e,t,n;if(r=oe,(e=ve())!==o){for(t=[],n=Ce();n!==o;)t.push(n),n=Ce();t!==o&&(n=Se())!==o?(e=A(e,t),r=e):(oe=r,r=o)}else oe=r,r=o;return r}())!==o&&Se()!==o?(125===r.charCodeAt(oe)?(a=f,oe++):(a=o,0===le&&ge(h)),a!==o?e=t=g(n):(oe=e,e=o)):(oe=e,e=o),e}function ve(){var e;return(e=function(){var e,t,n,a;return e=oe,Se()!==o?(40===r.charCodeAt(oe)?(t=b,oe++):(t=o,0===le&&ge(C)),t!==o&&(n=ve())!==o?(41===r.charCodeAt(oe)?(a=T,oe++):(a=o,0===le&&ge(x)),a!==o&&Se()!==o?e=N(n):(oe=e,e=o)):(oe=e,e=o)):(oe=e,e=o),e}())===o&&(e=function(){var r,e,t,n;if(r=oe,(e=xe())!==o){for(t=[],n=be();n!==o;)t.push(n),n=be();t!==o&&(n=Se())!==o?r=e=v(e,t):(oe=r,r=o)}else oe=r,r=o;return r}()),e}function be(){var r;return(r=function(){var r,e,t,n;return r=oe,(e=Se())!==o&&(t=Te())!==o&&Se()!==o&&(n=xe())!==o?(e=S(t,n),r=e):(oe=r,r=o),r}())===o&&(r=Ce()),r}function Ce(){var r,e,t;return r=oe,Se()!==o&&(e=Te())!==o&&Se()!==o&&(t=ve())!==o?r=O(e,t):(oe=r,r=o),r}function Te(){var e;return(e=function(){var e;return le++,r.substr(oe,2)===F?(e=F,oe+=2):(e=o,0===le&&ge(w)),le--,e===o&&0===le&&ge(E),e}())===o&&(e=function(){var e;return le++,r.substr(oe,2)===j?(e=j,oe+=2):(e=o,0===le&&ge(V)),le--,e===o&&0===le&&ge(q),e}()),e}function xe(){var e,t,n,a;return e=oe,(t=Ne())!==o&&Se()!==o&&(n=function(){var e;return r.substr(oe,2)===xr?(e=xr,oe+=2):(e=o,0===le&&ge(Nr)),e===o&&(60===r.charCodeAt(oe)?(e=Or,oe++):(e=o,0===le&&ge(Sr)),e===o&&(r.substr(oe,2)===Er?(e=Er,oe+=2):(e=o,0===le&&ge(Fr)),e===o&&(62===r.charCodeAt(oe)?(e=wr,oe++):(e=o,0===le&&ge(qr)),e===o&&(58===r.charCodeAt(oe)?(e=jr,oe++):(e=o,0===le&&ge(Vr)),e===o&&(r.substr(oe,3)===kr?(e=kr,oe+=3):(e=o,0===le&&ge(Lr)),e===o&&(r.substr(oe,2)===Br?(e=Br,oe+=2):(e=o,0===le&&ge(Qr)),e===o&&(r.substr(oe,3)===Ir?(e=Ir,oe+=3):(e=o,0===le&&ge(Hr)),e===o&&(r.substr(oe,2)===Mr?(e=Mr,oe+=2):(e=o,0===le&&ge(_r)))))))))),e}())!==o&&Se()!==o&&(a=Ne())!==o?e=t=k(t,n,a):(oe=e,e=o),e}function Ne(){var e,t;return e=oe,(t=function(){var e,t;return(e=function(){var e,t,n,a;if(e=oe,t=oe,Jr.test(r.charAt(oe))?(n=r.charAt(oe),oe++):(n=o,0===le&&ge(Ur)),n!==o?(46===r.charCodeAt(oe)?(a=y,oe++):(a=o,0===le&&ge(d)),a!==o?t=n=[n,a]:(oe=t,t=o)):(oe=t,t=o),t===o&&(t=null),t!==o){if(n=[],Jr.test(r.charAt(oe))?(a=r.charAt(oe),oe++):(a=o,0===le&&ge(Ur)),a!==o)for(;a!==o;)n.push(a),Jr.test(r.charAt(oe))?(a=r.charAt(oe),oe++):(a=o,0===le&&ge(Ur));else n=o;n!==o?(t=Dr(t,n),e=t):(oe=e,e=o)}else oe=e,e=o;return e}())===o&&(e=Ee())===o&&(e=oe,(t=function(){var e;return le++,r.substr(oe,4)===Wr?(e=Wr,oe+=4):(e=o,0===le&&ge(Xr)),le--,e===o&&0===le&&ge(Kr),e}())!==o&&(t=zr()),(e=t)===o&&(e=oe,(t=function(){var e;return le++,r.substr(oe,5)===$r?(e=$r,oe+=5):(e=o,0===le&&ge(re)),le--,e===o&&0===le&&ge(Yr),e}())!==o&&(t=Rr()),(e=t)===o&&(e=oe,(t=function(){var e;return le++,r.substr(oe,4)===te?(e=te,oe+=4):(e=o,0===le&&ge(ne)),le--,e===o&&0===le&&ge(ee),e}())!==o&&(t=Zr()),e=t))),e}())!==o&&(t=L(t)),(e=t)===o&&(e=me()),e}function Oe(){var e;return Z.test(r.charAt(oe))?(e=r.charAt(oe),oe++):(e=o,0===le&&ge(J)),e}function Se(){var e,t;for(le++,e=[],D.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ge(G));t!==o;)e.push(t),D.test(r.charAt(oe))?(t=r.charAt(oe),oe++):(t=o,0===le&&ge(G));return le--,e===o&&(t=o,0===le&&ge(U)),e}function Ee(){var e,t,n,a;if(le++,e=oe,34===r.charCodeAt(oe)?(t=W,oe++):(t=o,0===le&&ge(X)),t!==o){for(n=[],a=Fe();a!==o;)n.push(a),a=Fe();n!==o?(34===r.charCodeAt(oe)?(a=W,oe++):(a=o,0===le&&ge(X)),a!==o?e=t=Y(n):(oe=e,e=o)):(oe=e,e=o)}else oe=e,e=o;if(e===o)if(e=oe,39===r.charCodeAt(oe)?(t=$,oe++):(t=o,0===le&&ge(rr)),t!==o){for(n=[],a=we();a!==o;)n.push(a),a=we();n!==o?(39===r.charCodeAt(oe)?(a=$,oe++):(a=o,0===le&&ge(rr)),a!==o?e=t=Y(n):(oe=e,e=o)):(oe=e,e=o)}else oe=e,e=o;return le--,e===o&&(t=o,0===le&&ge(K)),e}function Fe(){var e,t,n;return e=oe,t=oe,le++,34===r.charCodeAt(oe)?(n=W,oe++):(n=o,0===le&&ge(X)),n===o&&(92===r.charCodeAt(oe)?(n=er,oe++):(n=o,0===le&&ge(tr))),le--,n===o?t=void 0:(oe=t,t=o),t!==o?(r.length>oe?(n=r.charAt(oe),oe++):(n=o,0===le&&ge(nr)),n!==o?e=t=or(n):(oe=e,e=o)):(oe=e,e=o),e===o&&(e=oe,92===r.charCodeAt(oe)?(t=er,oe++):(t=o,0===le&&ge(tr)),t!==o&&(n=qe())!==o?e=t=ar(n):(oe=e,e=o)),e}function we(){var e,t,n;return e=oe,t=oe,le++,39===r.charCodeAt(oe)?(n=$,oe++):(n=o,0===le&&ge(rr)),n===o&&(92===r.charCodeAt(oe)?(n=er,oe++):(n=o,0===le&&ge(tr))),le--,n===o?t=void 0:(oe=t,t=o),t!==o?(r.length>oe?(n=r.charAt(oe),oe++):(n=o,0===le&&ge(nr)),n!==o?e=t=or(n):(oe=e,e=o)):(oe=e,e=o),e===o&&(e=oe,92===r.charCodeAt(oe)?(t=er,oe++):(t=o,0===le&&ge(tr)),t!==o&&(n=qe())!==o?e=t=ar(n):(oe=e,e=o)),e}function qe(){var e,t;return 39===r.charCodeAt(oe)?(e=$,oe++):(e=o,0===le&&ge(rr)),e===o&&(34===r.charCodeAt(oe)?(e=W,oe++):(e=o,0===le&&ge(X)),e===o&&(92===r.charCodeAt(oe)?(e=er,oe++):(e=o,0===le&&ge(tr)),e===o&&(e=oe,98===r.charCodeAt(oe)?(t=ir,oe++):(t=o,0===le&&ge(ur)),t!==o&&(t=lr()),(e=t)===o&&(e=oe,102===r.charCodeAt(oe)?(t=sr,oe++):(t=o,0===le&&ge(pr)),t!==o&&(t=cr()),(e=t)===o&&(e=oe,110===r.charCodeAt(oe)?(t=fr,oe++):(t=o,0===le&&ge(hr)),t!==o&&(t=gr()),(e=t)===o&&(e=oe,114===r.charCodeAt(oe)?(t=yr,oe++):(t=o,0===le&&ge(dr)),t!==o&&(t=mr()),(e=t)===o&&(e=oe,116===r.charCodeAt(oe)?(t=Pr,oe++):(t=o,0===le&&ge(Ar)),t!==o&&(t=vr()),(e=t)===o&&(e=oe,118===r.charCodeAt(oe)?(t=br,oe++):(t=o,0===le&&ge(Cr)),t!==o&&(t=Tr()),e=t)))))))),e}if((t=i())!==o&&oe===r.length)return t;throw t!==o&&oe<r.length&&ge({type:"end"}),ye(ue,ie<r.length?r.charAt(ie):null,ie<r.length?he(ie,ie+1):he(ie,ie))}}},function(r,e,t){"use strict";t.r(e);var n=t(0);let o;!function(r){r[r.Identifier=0]="Identifier",r[r.Value=1]="Value",r[r.Comparison=2]="Comparison",r[r.Comparer=3]="Comparer",r[r.LogicalOperatorPlusComparison=4]="LogicalOperatorPlusComparison",r[r.LogicalOperatorHierarchy=5]="LogicalOperatorHierarchy",r[r.LogicalOperatorPlusFilterScope=6]="LogicalOperatorPlusFilterScope"}(o||(o={}));class a{buildPath(r,e){let t=null,n=null;if(r.forEach(r=>{t?(n.next=r,n=n.next):n=t=r}),e){if(!n)return e;n.next=e}return t}buildPathCombination(r){let e=null,t=null;return r.forEach(r=>{for(e?t.next=r:t=e=r;t.next;)t=t.next}),e}buildIdentifier(r,e){return{operationPayload:{memberName:r,isFlat:e},operationType:o.Identifier}}buildValue(r){return{operationPayload:r,operationType:o.Value}}buildComparison(r,e,t){return{operationPayload:{left:r,comparer:{operationType:o.Comparer,operationPayload:e},right:t},operationType:o.Comparison}}buildOperatorPlusComparer(r,e){return{operationPayload:{operator:r,comparison:e},operationType:o.LogicalOperatorPlusComparison}}buildOperatorPlusFilterScope(r,e){return{operationPayload:{operator:r,scope:e},operationType:o.LogicalOperatorPlusFilterScope}}buildCombinedFilter(r,e){const t={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:"",comparisons:[r]}};return this.mergeFilters(t,e)}buildParenthesis(r){return{operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:"",comparisons:[r]}}}buildFilterContent(r,e){return e.length?this.mergeFilters(r,e):r}mergeFilters(r,e){const t=[];let n=r,a=n;return t.push(n),e.forEach(r=>{n||(a=n,t.push(n));const e=r.operationPayload.scope?r.operationPayload.scope.operationPayload.comparisons:[r.operationPayload.comparison];if(""===a.operationPayload.operator||r.operationPayload.operator===a.operationPayload.operator)a.operationPayload.operator=r.operationPayload.operator,a.operationPayload.comparisons=[...a.operationPayload.comparisons,...e];else{if("&&"===r.operationPayload.operator){const n=a.operationPayload.comparisons.pop(),i={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:r.operationPayload.operator,comparisons:[n,...e]}};a.operationPayload.comparisons.push(i),t.push(i)}else{const i=t.pop(),u={operationType:o.LogicalOperatorHierarchy,operationPayload:{operator:r.operationPayload.operator,comparisons:[i,...e]}};a=u,t.length||(n=a),t.push(u)}}}),n}}class i{getNextPointer(r){let e=this.getNextValue(r);const t={eachElement:!1};return e.values?t.multipleTargets=e.values.map(r=>({targetPosition:r,propertyName:""})):t.singleTarget={propertyName:"",targetPosition:e.value},t}getNextValue(r){let e={};if(r.multipleTargets)r.eachElement?(e={values:[]},r.multipleTargets.forEach(r=>{Array.isArray(r.targetPosition)?r.targetPosition.forEach(t=>{e.values=[...e.values,...this.getProperty(t,r.propertyName)]}):e.values=[...e.values,null]})):e={values:r.multipleTargets.map(r=>this.getProperty(r.targetPosition,r.propertyName))};else if(r.singleTarget)if(r.eachElement){const t=Array.isArray(r.singleTarget.targetPosition);e=t?{values:r.singleTarget.targetPosition.map(e=>{const t=this.getProperty(e,r.singleTarget.propertyName);return void 0===t?null:t})}:{values:[]}}else{const t=this.getProperty(r.singleTarget.targetPosition,r.singleTarget.propertyName);e={value:void 0===t?null:t}}else e={};return e}getProperty(r,e){return Array.isArray(e)?e.map(e=>r?r[e]:null):r?r[e]:null}}class u extends i{getAll(){if(!this.propertyPointer||!this.propertyPointer.singleTarget&&!this.propertyPointer.multipleTargets)return[];const r=this.getNextValue(this.propertyPointer);return void 0===r?[]:this.propertyPointer.eachElement||this.propertyPointer.multipleTargets?r.values:[r.value]}getSingle(){const r=this.getAll();return r.length?r[0]:null}setAll(r){this.set(r,!1)}setSingle(r){this.set(r,!0)}set(r,e){if(this.propertyPointer&&(this.propertyPointer.singleTarget||this.propertyPointer.multipleTargets))if(this.propertyPointer.multipleTargets)for(let t=0;t<this.propertyPointer.multipleTargets.length;t++){const n=this.propertyPointer.multipleTargets[t];if(Array.isArray(n.propertyName))for(let t=0;t<n.propertyName.length;t++){const o=n.propertyName[t];if(n.targetPosition[o]=r,e)return}else n.targetPosition[n.propertyName]=r;if(e)return}else if(this.propertyPointer.eachElement&&this.propertyPointer.singleTarget){if(Array.isArray(this.propertyPointer.singleTarget.targetPosition))for(let t=0;t<this.propertyPointer.singleTarget.targetPosition.length;t++){if(this.propertyPointer.singleTarget.targetPosition[t][this.propertyPointer.singleTarget.propertyName]=r,e)return}}else if(this.propertyPointer.singleTarget)if(Array.isArray(this.propertyPointer.singleTarget.propertyName))for(let t=0;t<this.propertyPointer.singleTarget.propertyName.length;t++){const n=this.propertyPointer.singleTarget.propertyName[t];if(this.propertyPointer.singleTarget.targetPosition[n]=r,e)return}else null!==this.propertyPointer.singleTarget.targetPosition&&(this.propertyPointer.singleTarget.targetPosition[this.propertyPointer.singleTarget.propertyName]=r)}constructor(r,e,t){super(),this.isQueryValid=r,this.propertyPointer=e,this.error=t}}class l extends i{constructor(){super()}process(r,e){return this.resolveQuery(r,null,e)}resolveQuery(r,e,t){let n=e?this.getNextPointer(e):{singleTarget:{propertyName:"",targetPosition:t},eachElement:!1};switch(r.operationType){case o.Identifier:n.eachElement=r.operationPayload.isFlat,n.multipleTargets?n.multipleTargets.forEach(e=>{e.propertyName=r.operationPayload.memberName}):n.singleTarget.propertyName=r.operationPayload.memberName;break;case o.Comparison:n=this.filterAll(e,r);break;case o.LogicalOperatorHierarchy:n=this.filterAll(e,r);break;default:throw"Not implemented operation type on "+JSON.stringify(r)}return r.next?this.resolveQuery(r.next,n):n}filterAll(r,e){const t=new u(!0,r),n={eachElement:!1};if(r.multipleTargets){const r=t.getAll();n.multipleTargets=r.map(r=>({targetPosition:r,propertyName:this.filterSingle(r,e)}))}else if(r.singleTarget){const r=t.getSingle();n.singleTarget={targetPosition:r,propertyName:this.filterSingle(r,e)}}return n}filterSingle(r,e){const t=[];return r&&Array.isArray(r)&&r.forEach((r,n)=>{if("object"==typeof r){(e.operationType===o.Comparison?this.compare(r,e):this.combine(r,e))&&t.push(n)}}),t}combine(r,e){const t="&&"===e.operationPayload.operator;for(let n=0;n<e.operationPayload.comparisons.length;n++){const a=e.operationPayload.comparisons[n],i=a.operationType===o.Comparison?this.compare(r,a):this.combine(r,a);if(i&&!t)return!0;if(!i&&t)return!1}return t}compare(r,e){const{left:t,comparer:n,right:o}=e.operationPayload,a=this.getComparisonSideValue(t,r),i=this.getComparisonSideValue(o,r);let u=!1;switch(n.operationPayload){case">=":u=a>=i;break;case">":u=a>i;break;case"<=":u=a<=i;break;case"<":u=a<i;break;case"==":u=a==i;break;case"===":u=a===i;break;case"!=":u=a!=i;break;case"!==":u=a!==i;break;case":":u="string"==typeof a&&"string"==typeof i&&a.indexOf(i)>-1}return u}getComparisonSideValue(r,e){if(r.operationType===o.Identifier){const t=this.resolveQuery(r,null,e);return new u(!0,t).getSingle()}return r.operationPayload}}e.default=class{createQuery(r){try{return{isQueryValid:!0,query:n.parse(r,{queryBuilder:new a})}}catch(r){return{error:r,isQueryValid:!1,query:null}}}executeQuery(r,e){let t="string"==typeof e?this.createQuery(e):e;if(t.isQueryValid&&t.query){const e=(new l).process(t.query,r);return new u(!0,e)}return new u(!1,null,t.error)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiXSwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIl0sIm1hcHBpbmdzIjoiQUFDQSIsInNvdXJjZVJvb3QiOiIifQ==